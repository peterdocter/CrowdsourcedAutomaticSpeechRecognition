<html><head>
<title>${title}</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script type='text/javascript' src='https://s3.amazonaws.com/mturk-public/externalHIT_v1.js'>
</script>
<script type='text/javascript'>
  function disableInput(){
  hit_id=getParameterByName("assignmentId");
  if (hit_id == "ASSIGNMENT_ID_NOT_AVAILABLE"){
		${disable_script}
  }
  };
  function getParameterByName(name) {
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
        results = regex.exec(location.search);
    return results == null ? null : decodeURIComponent(results[1].replace(/\+/g, " "));
  }
  function validateForm(){
	  if (window.validate)
		  return true;
	  else
              {
                   alert("Please make sure to listen to every audio clip.");
                   return false;
              }
  }
  function disableSubmitButton(){
	  window.validate = false;
	  document.getElementById("submitButton").setAttribute('onclick','return validateForm();');
  }
  
  function enableSubmitButton(audioId){
  window.listenedIds[window.idsCount] = audioId;
  window.idsCount += 1;
  window.validate = compareArrays(window.audioIds,window.listenedIds);
  }

  function compareArrays(ref,hyp){
  var reflen = ref.length;
  var hyplen = hyp.length;
  var same = false;

  for(var i = 0; i < reflen; i++){
     same = false;

     for(var j = 0; j < hyplen; j++){
	if (ref[i].localeCompare(hyp[j]) === 0) {
			same = true;
			}
     }

     if(!same){
	return false;
	}
  }
  return true;
}


  function loadFuncs(){
	  disableInput();
	  disableSubmitButton();
          //addAudioEventListeners();
  window.audioIds = [${audio_id}];
  window.listenedIds = new Array();
  window.idsCount = 0;
  }
  window.onload = loadFuncs;  
  function play(id){
	  document.getElementById(id).play();
  }
</script>
<style type="text/css">
  .row {  height:auto !important; }
  .list {display: none; }
  .show {display: none; }
  .hide:target + .show {display: inline; }
  .hide:target {display: inline; }
  .hide:target ~ .list {display:inline; }
  @media print { .hide, .show {display: none; }}
</style>
</head><body><form name="mturk_form" method="post" id="mturk_form" action="https://www.mturk.com/mturk/externalSubmit"><input type="hidden" value="" name="assignmentId" id="assignmentId" />
<div id="title">
  <h3>Transcribe the audio</h3>

<div class="highlight-box">
  <a href="#hide1" class="hide" id="hide1">Expand Example</a>
  <a href="#show1" class="show" id="show1">Collapse Example</a>
  <ul>
    <li>The following audio clips are in English.</li>
    <li>Transcribe the audio clip by typing the words that the person                         says in order.</li>
    <li>Do not use abbreviations: 'street' and NOT 'st.'</li>
    <li>Write numbers long-form, as in: 'twenty fifth' NOT '25th'.</li>
    <li>Write letters (see example).</li>
    <li>Punctuation does not matter.</li>
  </ul>
  <div class="list">
    <audio controls="" id="12345" onfocus="play('12345');"><source src="http://www.cis.upenn.edu/~tturpen/wavs/sdc0_5/sr067.wav" type="audio/wav" /> Your browser does not support the audio element.</audio>
    <p>Transcription:</p>
    <p><input id="example01" name="example01" size="100" type="text" readOnly="true" value="What was the Nashua's position in ASUW area mission code on the twenty first of August?"/></p>
</div>

</div>